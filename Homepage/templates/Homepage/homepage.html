{% extends "Homepage/index.html" %}
{% block body %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/homepage.css' %}">
<script type="application/javascript">
window.graphic_url = "{{ graphic_url }}";
</script>
<script src="{% static "/js/Homepage_script.js" %}"></script>
{#<script src="{% static "/js/jquery.jqplot.min.js" %}"></script>#}
{#<script src="{% static "/css/jquery.jqplot.css" %}"></script>#}
{#<script src="{% static "/js/jqplot.pieRenderer.js" %}"></script>#}
<script src="{% static "/js/pie.js" %}"></script>

<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
    <div style="text-align: center;"></div>
    <div class="mx-auto">
        <div style="text-align: center; margin-bottom: 20px;"><b>{{ hello }}, {{ user }}</b></div>
        <div class="current_month mx-auto">
            1 Июля - 31 июля
            <img src="{% static 'Homepage/gear.svg' %}" width="30px">
        </div>
        <div class="forms" >
        {% if income %}
            <form action="add_income" method="POST" style="text-align: center; margin-top: 20px">
                <label><b><a href="/">ДОХОДЫ</a></b></label><br><br>
                <input type="number" step="0.01" min="1" id="add_income" name="add_income" placeholder="Введите сумму" required><br>
                <input type="text" id="comment" name="comment" placeholder="Комментарий"><br>
                <select name="source" required>
                    {% for source in sources %}
                        {% if source != ''%}
                            <option value="{{ source }}">{{ source }}</option>
                        {% endif %}
                    {% endfor %}
                    <option disabled selected>Выберите источник</option>
                </select><br>
                <button type="button" class="submit-button" id="plus_button">Add source</button><br>
                <div id="category">
                    <input type="text" name="new_source" placeholder="Добавьте источник"><br>
                </div>
                <button type="submit" class="submit_button">
                    <img src="{% static "Homepage/plus.svg" %}" style="width: 50px">
                </button>
            </form>
            <div id="chartContainer" style="height: 370px; width: 100%;"></div>
        {% else %}
            <form action="add_money" method="POST" style="text-align: center; margin-top: 20px">
                <label><b><a href="?what=show_income">РАСХОДЫ</a></b></label><br><br>
{#                <label><b><a href="/?income_context=1">РАСХОДЫ</a></b></label><br><br>#}
                <input type="number" step="0.01" min="1" id="add_money" name="add_money" placeholder="Введите сумму" required><br>
                <input type="text" id="comments" name="comments" placeholder="Комментарий"><br>
                <select name="category" required>
                    {% for category in categories %}
                        {% if category != ''%}
                        <option value="{{ category }}">{{ category }}</option>
                        {% endif %}
                    {% endfor %}
                    <option disabled selected>Выберите категорию</option>
                </select><br>
                <button type="button" class="submit-button" id="plus_button">Add new category</button><br>
                <div id="category">
                    <input type="text" name="new_category" placeholder="Добавьте категорию"><br>
                </div>
                <button type="submit" class="submit_button">
                    <img src="{% static "Homepage/plus.svg" %}" style="width: 50px">
                </button>
            </form>
            <div id="chartContainer" style="height: 370px; width: 100%;"></div>
        {% endif %}
        </div>
    </div>
{% endblock %}
