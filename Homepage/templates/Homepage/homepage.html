{% extends "Homepage/index.html" %}
{% block body %}
{% load static %}
<link rel="stylesheet" type="text/css" href="../../static/css/homepage.css">
<script src="{% static "/js/Homepage_script.js" %}"></script>
{#<script src="{% static "/js/jquery.jqplot.min.js" %}"></script>#}
{#<script src="{% static "/css/jquery.jqplot.css" %}"></script>#}
{#<script src="{% static "/js/jqplot.pieRenderer.js" %}"></script>#}
{#<script src="{% static "/js/pie.js" %}"></script>#}
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
<script>

$.post(
    "pie_fn", {}, [
        function fn1(response) {
            console.log(typeof response)
            console.log(response)
            {#return response#}
            for (var idx in response) {
                console.log(response[idx])
            }
            {#alert(response)#}
        }
]);


XXX = [
			{ y: 48.36, label: "aaaaaaaaaaa" },
			{ y: 26.85, label: "bbbbb" },
			{ y: 1.49, label: "ccc" },
			{ y: 6.98, label: "ddd" },
		]
window.onload = function () {
var options = {
	data: [{
		type: "pie",
		startAngle: 40,
		toolTipContent: "<b>{label}</b>: {y}%",
		showInLegend: "true",
		legendText: "{label}",
		indexLabelFontSize: 16,
		indexLabel: "{label} - {y}%",
		dataPoints: XXX
	}]
};
$("#chartContainer").CanvasJSChart(options);
}
</script>
    <div style="text-align: center;"></div>
    <div class="mx-auto">
        <div style="text-align: center; margin-bottom: 20px"><b>{{ hello }}, {{ user }}</b></div>
        <div class="current_month mx-auto">
            1 Июля - 31 июля
            <img src="{% static 'Homepage/gear.svg' %}" width="30px">
        </div>
        <form action="add_money" method="POST" style="text-align: center; margin-top: 20px">
            <input type="number" step="0.01" min="1" id="add_money" name="add_money" placeholder="Введите сумму" required><br>
            <input type="text" id="comments" name="comments" placeholder="Комментарий"><br>
            <select name="category" required>
                {% for category in categories %}
                    {% if category != ''%}
                    <option value="{{ category }}">{{ category }}</option>
                    {% endif %}
                {% endfor %}
                <option disabled selected>Выберите категорию</option>
            </select><br>
            <button type="button" class="submit-button" id="plus_button">add category</button><br>
            <div id="category">
                <input type="text" name="category" placeholder="Добавьте категорию"><br>
            </div>
            <button type="submit" class="submit_button">
                <img src="{% static "Homepage/plus.svg" %}" style="width: 50px">
            </button>
        </form>
{#        <div style="text-align: center">#}
{#            <img src="{% static "Homepage/pie.svg" %}" width="640">#}
{#        </div>#}
{#        </div><div id="chart7" style="height:400px;"></div>#}
        <div id="chartContainer" style="height: 370px; width: 100%;"></div>
    </div>
{% endblock %}
